<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Flashcard Studio offers a great way to retain information. By promoting active recall, you can ensure that you donâ€™t forget the information that you learned.">
    <title>Flashcard Studio (Beta)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="libs/micromodal/index.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="style.css" rel="stylesheet">
</head>
<body class="bg-gray-100 text-gray-800 flex flex-col items-center min-h-screen p-4">

    <div id="main-container" class="w-full max-w-3xl mx-auto bg-white rounded-2xl shadow-lg p-6 md:p-8">
        <header class="mb-6">
            <h1 class="text-3xl font-bold text-gray-900 text-center">Flashcard Studio (Beta)</h1>
            <p class="text-center text-gray-500 mt-1">Create, study, and master your subjects.</p>
        </header>

        <div class="flex justify-center gap-4 mb-4 border-t border-b border-gray-200 py-3">
            <button id="import-btn" class="bg-gray-200 text-gray-700 font-semibold py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors text-sm">Import Cards</button>
            <input type="file" id="import-file-input" class="hidden" accept=".json" aria-label="Import flashcards from a JSON file">
            <button id="export-btn" class="bg-gray-200 text-gray-700 font-semibold py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors text-sm">Export Cards</button>
        </div>

        <nav class="flex justify-center border-b border-gray-200 mb-6" role="tablist" aria-label="Main navigation">
            <button id="nav-create" role="tab" aria-selected="true" aria-controls="create-view" class="nav-btn active-tab px-4 py-2 font-semibold text-blue-600 border-b-2 border-blue-600">Create</button>
            <button id="nav-review" role="tab" aria-selected="false" aria-controls="review-view" class="nav-btn text-gray-500 px-4 py-2 font-semibold">Review Deck</button>
            <button id="nav-later" role="tab" aria-selected="false" aria-controls="later-view" class="nav-btn text-gray-500 px-4 py-2 font-semibold">For Later</button>
        </nav>

        <main id="main-content">
            <!-- Create Card View -->
            <div id="create-view" role="tabpanel" aria-labelledby="nav-create" class="view active">
                <h2 id="create-heading" class="text-xl font-semibold mb-4 text-center">Add a New Flashcard</h2>
                <form id="create-form" class="space-y-4" aria-labelledby="create-heading">
                    <div>
                        <label for="question" class="block text-sm font-medium text-gray-700">Question</label>
                        <textarea id="question" rows="3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm custom-focus-ring sm:text-sm p-2" placeholder="e.g., What is the capital of Japan?" required aria-required="true"></textarea>
                    </div>
                    <div>
                        <label for="question-type" class="block text-sm font-medium text-gray-700">Question Type</label>
                        <select id="question-type" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm custom-focus-ring sm:text-sm p-2">
                            <option value="identification">Identification</option>
                            <option value="multiple-choice">Multiple Choice</option>
                            <option value="enumeration">Enumeration</option>
                        </select>
                    </div>
                    <div id="mc-options-container" class="hidden space-y-2">
                        <label id="mc-label" class="block text-sm font-medium text-gray-700">Answer Choices</label>
                        <div id="mc-options-list" class="space-y-2" aria-labelledby="mc-label"></div>
                        <button type="button" id="add-option-btn" class="text-sm text-blue-600 hover:text-blue-800 font-medium">+ Add another choice</button>
                    </div>
                    <div id="answer-container">
                        <label for="answer" class="block text-sm font-medium text-gray-700">Correct Answer</label>
                        <input type="text" id="answer" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm custom-focus-ring sm:text-sm p-2" placeholder="e.g., Tokyo">
                    </div>
                    <div id="enum-items-container" class="space-y-4">
                        <div class="space-y-2">
                            <label class="block text-sm font-medium text-gray-700">Options</label>
                            <div class="flex space-x-2 items-center sm:text-sm">
                                <label class="switch"><input type="checkbox" id="enumeration-order" role="switch" aria-checked="false" onchange="this.ariaChecked = this.checked"><span class="slider"></span></label>
                                <label for="enumeration-order">Enumerate in order?</label>
                            </div>
                        </div>
                        <div>
                            <label id="enum-label" class="block text-sm font-medium text-gray-700">Correct Items</label>
                            <div id="enum-items-list" class="space-y-2" aria-labelledby="enum-label"></div>
                            <button type="button" id="add-item-btn" class="text-sm text-blue-600 hover:text-blue-800 font-medium">+ Add item</button>
                        </div>
                    </div>
                    <div id="alternatives-container" class="space-y-2">
                        <label id="alt-label" class="block text-sm font-medium text-gray-700">Alternative Answers (Optional)</label>
                        <div id="alternatives-list" class="space-y-2" aria-labelledby="alt-label"></div>
                        <button type="button" id="add-alternative-btn" class="text-sm text-blue-600 hover:text-blue-800 font-medium">+ Add alternative</button>
                    </div>
                    <button type="submit" class="w-full bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors">Add Card</button>
                </form>
            </div>

            <!-- Review View -->
            <div id="review-view" role="tabpanel" aria-labelledby="nav-review" class="view">
                 <div id="review-card-container" class="hidden text-center">
                    <p id="review-progress" class="text-gray-500" aria-live="polite"></p>
                    <div id="review-card" class="bg-gray-50 p-6 rounded-lg shadow-md min-h-[200px] flex items-center justify-center flex-col">
                        <p id="review-question" class="text-lg font-medium"></p>
                    </div>
                    <div id="review-answer-area" class="mt-4"></div>
                    <div id="feedback-message" class="mt-4 font-medium p-3 rounded-lg" role="status" aria-live="assertive"></div>
                    <button id="submit-answer-btn" class="mt-4 w-full bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">Submit Answer</button>
                    <button id="next-card-btn" class="hidden mt-4 w-full bg-gray-700 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500">Next Card</button>
                </div>
                <div id="review-management-area">
                    <h2 id="review-heading" class="text-xl font-semibold mb-4 text-center">Review Deck Management</h2>
                    <div id="review-list" class="space-y-2" aria-labelledby="review-heading"></div>
                    <div class="text-center py-4">
                        <p id="review-list-placeholder" class="text-gray-500">No cards to review. Create some first!</p>
                        <button type="button" class="add-card text-sm text-blue-600 hover:text-blue-800 font-medium">+ Add card</button>
                    </div>
                    <button id="start-review-btn" class="hidden mt-4 w-full bg-green-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-green-700">Start Review Session</button>
                </div>
            </div>

            <!-- For Later View -->
            <div id="later-view" role="tabpanel" aria-labelledby="nav-later" class="view">
                <h2 id="later-heading" class="text-xl font-semibold mb-4 text-center">Cards Mastered (For Later Review)</h2>
                <div id="later-list" class="space-y-2" aria-labelledby="later-heading"></div>
                <div id="later-placeholder" class="text-center text-gray-500 py-4">
                    <p>Correctly answered cards will appear here.</p>
                </div>
                 <button id="review-later-btn" class="hidden mt-6 w-full bg-purple-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-purple-700">Review These Again</button>
            </div>
        </main>
    </div>

    <!-- Edit Modal -->
    <div id="edit-modal" class="modal" aria-hidden="true"><div tabindex="-1" class="modal-body-container p-4" data-micromodal-close>
        <div class="modal-body bg-white rounded-lg shadow-xl p-6 w-full max-w-lg my-8" role="dialog" aria-modal="true" aria-labelledby="edit-modal-title">
            <header class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold" id="edit-modal-title">Edit Flashcard</h2>
                <button class="close-btn" aria-label="Close modal" data-micromodal-close></button>
            </header>
            <form id="edit-form" class="space-y-4">
                <input type="hidden" id="edit-card-id">
                <input type="hidden" id="edit-card-source">
                <div>
                    <label for="edit-question" class="block text-sm font-medium text-gray-700">Question</label>
                    <textarea id="edit-question" rows="3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm custom-focus-ring sm:text-sm p-2" required aria-required="true"></textarea>
                </div>
                <div>
                    <label for="edit-question-type" class="block text-sm font-medium text-gray-700">Question Type</label>
                    <select id="edit-question-type" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm custom-focus-ring sm:text-sm p-2">
                        <option value="identification">Identification</option>
                        <option value="multiple-choice">Multiple Choice</option>
                        <option value="enumeration">Enumeration</option>
                    </select>
                </div>
                <div id="edit-mc-options-container" class="hidden space-y-2">
                    <label id="edit-mc-label" class="block text-sm font-medium text-gray-700">Answer Choices</label>
                    <div id="edit-mc-options-list" class="space-y-2" aria-labelledby="edit-mc-label"></div>
                    <button type="button" id="edit-add-option-btn" class="text-sm text-blue-600 hover:text-blue-800 font-medium">+ Add another choice</button>
                </div>
                <div id="edit-answer-container">
                    <label for="edit-answer" class="block text-sm font-medium text-gray-700">Correct Answer</label>
                    <input type="text" id="edit-answer" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm custom-focus-ring sm:text-sm p-2">
                </div>
                <div id="edit-enum-items-container" class="space-y-4">
                    <div class="space-y-2">
                        <label class="block text-sm font-medium text-gray-700">Options</label>
                        <div class="flex space-x-2 items-center sm:text-sm">
                            <label class="switch"><input type="checkbox" id="edit-enumeration-order" role="switch" aria-checked="false" onchange="this.ariaChecked = this.checked"><span class="slider"></span></label>
                            <label for="edit-enumeration-order">Enumerate in order?</label>
                        </div>
                    </div>
                    <div>
                        <label id="edit-enum-label" class="block text-sm font-medium text-gray-700">Correct Items</label>
                        <div id="edit-enum-items-list" class="space-y-2" aria-labelledby="edit-enum-label"></div>
                        <button type="button" id="edit-add-item-btn" class="text-sm text-blue-600 hover:text-blue-800 font-medium">+ Add item</button>
                    </div>
                </div>
                <div id="edit-alternatives-container" class="space-y-2">
                    <label id="edit-alt-label" class="block text-sm font-medium text-gray-700">Alternative Answers (Optional)</label>
                    <div id="edit-alternatives-list" class="space-y-2" aria-labelledby="edit-alt-label"></div>
                    <button type="button" id="edit-add-alternative-btn" class="text-sm text-blue-600 hover:text-blue-800 font-medium">+ Add alternative</button>
                </div>
                <div class="flex justify-end gap-4 mt-6">
                    <button type="button" id="cancel-edit-btn" class="bg-gray-200 text-gray-700 font-semibold py-2 px-4 rounded-lg hover:bg-gray-300" data-micromodal-close>Cancel</button>
                    <button type="submit" class="bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700">Save Changes</button>
                </div>
            </form>
        </div>
    </div></div>
    
    <!-- Confirm Remove Modal -->
    <div id="confirm-modal" class="modal" aria-hidden="true"><div tabindex="-1" class="modal-body-container p-4" data-micromodal-close>
        <div class="modal-body bg-white rounded-lg shadow-xl p-6 w-full max-w-sm text-center" role="dialog" aria-modal="true" aria-labelledby="confirm-modal-title" aria-describedby="confirm-modal-description">
            <h2 class="text-xl font-bold mb-4" id="confirm-modal-title">Are you sure?</h2>
            <p class="text-gray-600 mb-6" id="confirm-modal-description">Are you sure you want to remove this flashcard? This action cannot be undone.</p>
            <div class="flex justify-center gap-4">
                <button id="cancel-remove-btn" class="bg-gray-200 text-gray-700 font-semibold py-2 px-6 rounded-lg hover:bg-gray-300" data-micromodal-close>Cancel</button>
                <button id="confirm-remove-btn" class="bg-red-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-red-700" data-micromodal-close>Remove</button>
            </div>
        </div>
    </div></div>

    <!-- Custom Alert Modal -->
    <div id="alert-modal" class="modal" aria-hidden="true"><div tabindex="-1" class="modal-body-container p-4" data-micromodal-close>
        <div class="modal-body bg-white rounded-lg shadow-xl p-6 w-full max-w-sm text-center" role="dialog" aria-modal="true" aria-labelledby="alert-message" aria-live="assertive">
            <p id="alert-message" class="text-gray-700 mb-6"></p>
            <button id="alert-ok-btn" class="bg-blue-600 text-white font-bold py-2 px-8 rounded-lg hover:bg-blue-700" data-micromodal-close>OK</button>
        </div>
    </div></div>


    <script src="script.js"></script>
</body>
</html>
