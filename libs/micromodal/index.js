const MicroModal=(()=>{"use strict";const e=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],i={openTrigger:"data-micromodal-trigger",identifier:"data-micromodal-id"},n={},s=[];let t=0;i.generateId=()=>"micromodal-"+ ++t;class o{constructor({targetModal:e,triggers:t=[],onShow:o=()=>{},onClose:i=()=>{},openTrigger:n="data-micromodal-trigger",closeTrigger:s="data-micromodal-close",openClass:l="is-open",disableScroll:a=!1,disableFocus:d=!1,awaitCloseAnimation:r=!1,awaitOpenAnimation:c=!1,debugMode:h=!1}){this.modal="string"==typeof e?document.getElementById(e):e,(this.modalId=null)===this.modal?!0===h&&g(e,h,!1):(this.config={debugMode:h,disableScroll:a,openTrigger:n,closeTrigger:s,openClass:l,onShow:o,onClose:i,awaitCloseAnimation:r,awaitOpenAnimation:c,disableFocus:d},this.showModal=this.showModal.bind(this),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this),this.triggers=t,this.registerTriggers())}registerTriggers(){this.triggers.filter(Boolean).forEach(e=>{e.addEventListener("click",this.showModal)})}unregisterTriggers(){this.triggers.filter(Boolean).forEach(e=>{e.removeEventListener("click",this.showModal)})}destroy(){this.closeModal(),this.unregisterTriggers()}showModal(e=null){this.modal.classList.contains(this.config.openClass)||(this.removeEventListeners(),this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(this.config.openClass),this.toggleScrolling(!1),this.addEventListeners(),this.modalId&&-1===s.indexOf(this.modalId)&&s.push(this.modalId),this.config.awaitOpenAnimation?this.modal.addEventListener("animationend",this.setFocusToFirstNode,{once:!0}):this.setFocusToFirstNode(),this.config.onShow(this.modal,this.activeElement,e))}closeModal(e=null){const t=this.modal,o=this.config.openClass;var i;t.classList.contains(o)&&(-1<(i=s.indexOf(this.modalId))&&s.splice(i,1),this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.toggleScrolling(!0),this.activeElement&&this.activeElement.focus&&this.activeElement.focus(),this.config.onClose(this.modal,this.activeElement,e),this.config.awaitCloseAnimation?this.modal.addEventListener("animationend",function(){t.classList.remove(o)},{once:!0}):t.classList.remove(o))}toggleScrolling(e){var t;this.config.disableScroll&&(t=window.innerWidth-document.documentElement.clientWidth,document.body.style.overflow=e?"":"hidden",document.body.style.touchAction=e?"":"none",document.body.style.paddingRight=e?"":15+t+"px")}addEventListeners(){this.modal.addEventListener("click",this.onClick),this.modal.addEventListener("keydown",this.onKeydown),this.modalId?0===s.length&&document.addEventListener("keydown",a):document.removeEventListener("keydown",a)}removeEventListeners(){this.modal.removeEventListener("click",this.onClick),this.modal.removeEventListener("keydown",this.onKeydown),0===s.length&&document.removeEventListener("keydown",a)}onClick(e){var t=d(e.target,this.modal),o=e.target.closest(`[${this.config.closeTrigger}]`);(e.target.hasAttribute(this.config.closeTrigger)&&t||null!==o&&!d(o,this.modal)&&!t)&&(e.preventDefault(),e.stopPropagation(),this.closeModal(e))}onKeydown(e){"Escape"!==e.key&&27!==e.keyCode||null!==this.modal.querySelector('[role="alertdialog"]')||this.closeModal(e),"Tab"!==e.key&&9!==e.keyCode||this.retainFocus(e,"inside")}getFocusableNodes(){return[...this.modal.querySelectorAll(e)]}setFocusToFirstNode(){var e,t;this.config.disableFocus||0!==(e=this.getFocusableNodes()).length&&(0<(t=e.filter(e=>!e.hasAttribute(this.config.closeTrigger))).length&&t[0].focus(),0===t.length)&&e[0].focus()}retainFocus(e,t){let o=this.getFocusableNodes();0!==o.length&&(o=o.filter(e=>null!==e.offsetParent),"outside"===t||(t=o.indexOf(document.activeElement),e.shiftKey&&0===t&&(o[o.length-1].focus(),e.preventDefault()),!e.shiftKey&&0<o.length&&t===o.length-1))&&(o[0].focus(),e.preventDefault())}}const l=e=>{if("string"==typeof e)return e;if(e instanceof HTMLElement){var t=e.getAttribute(i.identifier);if(!t){if(e.id)return e.id;t=i.generateId(),e.setAttribute(i.identifier,t)}return t}return null},a=e=>{var t=n[s[s.length-1]];t.modal.contains(document.activeElement)||("Escape"!==e.key&&27!==e.keyCode||null!==t.modal.querySelector('[role="alertdialog"]')||h(),"Tab"!==e.key&&9!==e.keyCode)||t.retainFocus(e,"outside")},d=(e,t)=>e===t||e.parentNode===t,g=(e,t,o=!0)=>{let i;return(i=o?void 0!==n[e]:"string"==typeof e?null!==document.getElementById(e):e instanceof HTMLElement)||(t&&console.warn(`MicroModal: ❗Seems like you have missed %c'${e}'%c ID somewhere in your code. Try the example below to resolve it.

`+`%cExample:%c <div class="modal" id="${e}"></div>`,"background-color: #f8f9fa;color: #50596c;font-weight: bold;","","background-color: #f8f9fa;color: #50596c;font-weight: bold;",""),!1)};const r=(e,t={})=>{t=Object.assign({},i,{targetModal:e},t),e=l(e);g(t.targetModal,t.debugMode,!1)&&!n[e]&&(n[e]=new o(t),n[e].modal.setAttribute(i.identifier,e),n[e].modalId=e)},c=(e,t)=>{e=l(e);g(e,i.debugMode)&&Object.assign(n[e].config,t)};const h=e=>{0!==s.length&&(e?(e=l(e),-1<s.indexOf(e)&&n[e].closeModal()):n[s[s.length-1]].closeModal())};var m=o;return Object.assign(m,{init:e=>{Object.assign(i,e);e=[...document.querySelectorAll(`[${i.openTrigger}]`)];const o=((e,o)=>{const i=[];return e.forEach(e=>{var t=e.getAttribute(o);i[t]||(i[t]=[]),i[t].push(e)}),i})(e,i.openTrigger);!0===i.debugMode&&!1==!(e.length<=0&&(console.warn('MicroModal: ❗Please specify at least one %c\'micromodal-trigger\'%c data attribute.\n\n%cExample:%c <a href="#" data-micromodal-trigger="my-modal">Open modal</a>',"background-color: #f8f9fa;color: #50596c;font-weight: bold;","","background-color: #f8f9fa;color: #50596c;font-weight: bold;",""),1))||Object.keys(o).forEach(e=>{var t=o[e];r(e,{targetModal:e,triggers:t})})},initModal:r,config:c,show:(e,t)=>{var o=l(e);n[o]?t&&c(e,t):r(o,t),n[o]&&n[o].showModal()},close:h,closeAll:()=>{for(let e=s.length-1;0<=e;e--)n[s[e]].closeModal()},removeModal:e=>{var e=l(e),t=n[e];t&&(t.destroy(),delete n[e])},options:i}),m})();